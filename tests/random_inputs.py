import pytest


INPUT_184 = """
16 34 0 15
0-(66)>1
0-(99)>2
0-(42)>3
1-(43)>5
2-(72)>4
2-(62)>5
3-(23)>4
3-(44)>5
4-(41)>6
4-(84)>9
5-(19)>6
5-(21)>7
5-(84)>8
5-(12)>9
6-(44)>10
6-(32)>11
6-(33)>12
6-(28)>13
6-(79)>14
7-(19)>10
7-(23)>11
7-(28)>12
8-(40)>12
8-(80)>13
8-(78)>14
9-(53)>10
9-(86)>11
9-(4)>13
9-(62)>14
10-(99)>15
11-(12)>15
12-(8)>15
13-(27)>15
14-(46)>15
"""

INPUT_51 = """
24 45 0 23
0-(4)>1
0-(27)>2
0-(33)>3
0-(32)>4
0-(17)>5
1-(31)>6
1-(29)>8
2-(11)>7
2-(26)>8
2-(6)>9
2-(15)>10
3-(8)>7
3-(42)>10
4-(28)>7
4-(3)>8
4-(44)>9
4-(32)>10
5-(36)>6
5-(46)>7
5-(50)>8
6-(10)>13
6-(34)>14
7-(25)>13
7-(39)>14
8-(20)>12
8-(24)>13
9-(15)>11
9-(42)>12
9-(2)>13
10-(11)>11
10-(36)>13
12-(13)>15
12-(38)>16
14-(17)>17
15-(11)>18
15-(48)>19
16-(24)>18
16-(50)>19
18-(11)>20
18-(28)>22
19-(13)>21
19-(41)>22
20-(29)>23
21-(33)>23
22-(46)>23
"""

INPUT_134_EDGES = """
50 134 0 49
0-(21)>1
0-(10)>2
0-(34)>3
0-(34)>4
0-(12)>5
0-(47)>6
1-(35)>7
1-(24)>8
1-(37)>9
2-(14)>10
2-(38)>11
3-(19)>10
4-(27)>8
5-(41)>7
5-(28)>8
5-(16)>9
5-(13)>11
6-(8)>7
6-(21)>8
6-(22)>10
7-(20)>14
7-(20)>15
8-(10)>13
8-(34)>16
9-(5)>14
10-(11)>12
10-(15)>13
10-(3)>16
11-(20)>14
11-(11)>15
12-(22)>17
12-(29)>18
12-(8)>19
13-(47)>17
13-(14)>19
13-(22)>20
14-(33)>18
14-(24)>19
14-(36)>21
15-(49)>18
15-(19)>20
16-(32)>19
16-(32)>20
16-(46)>21
17-(20)>22
17-(43)>25
18-(25)>22
18-(43)>26
19-(26)>22
19-(6)>23
19-(6)>24
19-(10)>26
20-(1)>22
20-(17)>23
20-(3)>26
21-(15)>23
21-(36)>24
21-(6)>25
22-(40)>27
22-(16)>28
22-(5)>29
22-(32)>30
22-(26)>32
23-(38)>27
23-(4)>31
24-(33)>27
25-(9)>27
25-(49)>31
26-(36)>28
26-(12)>30
26-(6)>32
27-(26)>33
27-(45)>34
27-(50)>35
27-(47)>36
27-(1)>37
28-(18)>33
28-(26)>35
28-(11)>36
29-(26)>33
29-(27)>34
29-(32)>35
29-(35)>36
29-(11)>37
30-(9)>33
30-(10)>34
30-(16)>35
30-(34)>37
31-(16)>33
31-(45)>34
31-(44)>37
32-(24)>33
33-(47)>38
33-(14)>40
33-(9)>41
33-(2)>42
34-(23)>38
34-(33)>39
34-(27)>40
34-(40)>41
34-(50)>42
34-(49)>43
36-(25)>39
36-(32)>40
37-(16)>40
37-(6)>41
37-(6)>42
37-(4)>43
38-(18)>46
38-(24)>48
39-(50)>44
39-(8)>45
39-(16)>47
39-(38)>48
40-(20)>44
40-(1)>47
40-(24)>48
41-(11)>44
41-(19)>45
41-(9)>47
42-(40)>44
42-(26)>45
42-(21)>46
42-(2)>48
43-(23)>44
43-(38)>45
43-(3)>46
43-(32)>47
43-(15)>48
44-(5)>49
45-(40)>49
46-(24)>49
47-(29)>49
48-(23)>49
"""

INPUT_517_EDGES = """
94 517 0 93
0-(44)>1
0-(6)>2
0-(40)>3
0-(4)>4
0-(8)>5
0-(34)>6
0-(35)>7
0-(38)>8
0-(33)>9
0-(24)>10
1-(49)>11
1-(13)>12
1-(7)>13
1-(16)>14
1-(48)>16
1-(12)>17
1-(2)>18
1-(9)>19
2-(27)>11
2-(24)>12
2-(45)>13
2-(21)>15
2-(1)>18
3-(12)>14
3-(9)>16
4-(36)>11
4-(9)>12
4-(1)>13
4-(15)>14
4-(7)>15
4-(25)>16
4-(6)>17
4-(4)>18
5-(5)>11
5-(19)>13
5-(29)>14
5-(45)>15
5-(5)>19
6-(15)>12
6-(39)>13
6-(48)>14
6-(30)>15
6-(27)>16
6-(33)>17
6-(24)>18
6-(15)>19
7-(16)>11
7-(3)>12
7-(30)>13
7-(19)>15
7-(22)>16
7-(7)>18
8-(25)>11
8-(6)>12
8-(5)>13
8-(45)>14
8-(48)>15
8-(49)>16
8-(8)>17
8-(45)>19
9-(35)>13
9-(18)>14
9-(28)>15
9-(18)>16
9-(18)>17
10-(49)>11
10-(13)>12
10-(22)>14
10-(20)>15
10-(6)>17
11-(41)>20
11-(3)>22
11-(21)>24
11-(13)>25
11-(19)>26
11-(37)>27
11-(8)>28
12-(35)>20
12-(31)>22
12-(8)>23
12-(48)>24
12-(50)>26
12-(32)>27
12-(34)>28
12-(1)>29
13-(30)>21
13-(2)>22
13-(11)>23
13-(3)>24
13-(31)>25
13-(7)>29
14-(21)>22
14-(5)>23
14-(16)>25
14-(29)>26
14-(8)>28
15-(14)>20
15-(1)>23
15-(23)>24
15-(13)>25
15-(45)>26
15-(18)>28
15-(34)>29
16-(12)>20
16-(49)>21
16-(32)>22
16-(39)>23
16-(39)>25
16-(25)>27
16-(42)>28
16-(39)>29
17-(8)>20
17-(39)>25
17-(50)>26
17-(36)>28
17-(49)>29
18-(19)>20
18-(45)>21
18-(11)>22
19-(9)>20
19-(13)>21
19-(27)>22
19-(13)>23
19-(19)>24
19-(47)>25
19-(14)>28
20-(18)>31
20-(15)>33
20-(2)>39
21-(47)>31
21-(12)>32
21-(12)>33
21-(27)>36
21-(23)>37
21-(35)>38
22-(47)>30
22-(33)>31
22-(48)>32
22-(34)>33
22-(16)>36
22-(44)>37
23-(21)>32
23-(34)>34
23-(18)>36
24-(23)>30
24-(39)>31
24-(45)>32
24-(31)>34
24-(1)>35
24-(35)>36
24-(28)>37
24-(9)>38
24-(8)>39
25-(35)>30
25-(20)>33
25-(44)>34
25-(12)>36
25-(33)>38
26-(42)>31
26-(42)>32
26-(43)>33
26-(14)>34
26-(4)>37
27-(23)>30
27-(29)>32
27-(46)>34
27-(4)>36
28-(19)>31
28-(7)>34
28-(33)>36
28-(11)>38
29-(8)>30
29-(41)>31
29-(37)>35
29-(12)>37
29-(4)>38
30-(6)>40
30-(27)>42
30-(13)>43
30-(20)>44
30-(44)>47
30-(14)>48
31-(17)>40
31-(19)>41
31-(7)>47
31-(47)>48
31-(48)>49
32-(12)>40
32-(50)>41
32-(13)>42
32-(3)>43
32-(28)>44
32-(40)>45
32-(7)>46
32-(8)>47
32-(30)>48
32-(22)>49
33-(4)>40
33-(12)>41
33-(19)>42
33-(2)>46
33-(35)>48
34-(38)>40
34-(5)>42
34-(35)>43
34-(48)>44
34-(21)>45
34-(8)>47
34-(42)>48
35-(43)>41
35-(22)>43
35-(44)>44
35-(12)>45
35-(29)>48
36-(45)>43
36-(15)>44
36-(9)>46
36-(23)>49
37-(16)>41
37-(42)>43
37-(14)>44
37-(18)>45
37-(4)>46
37-(22)>47
37-(21)>49
38-(36)>46
38-(5)>47
38-(5)>48
39-(12)>41
39-(36)>42
39-(13)>43
39-(7)>44
39-(1)>46
39-(37)>47
39-(33)>49
40-(29)>50
40-(37)>51
40-(49)>52
40-(40)>53
40-(15)>55
40-(39)>56
40-(47)>57
40-(22)>58
40-(34)>60
40-(30)>61
41-(10)>51
41-(16)>54
41-(38)>58
41-(12)>59
41-(33)>60
41-(42)>61
42-(29)>52
42-(45)>53
42-(22)>59
42-(21)>60
42-(49)>61
43-(40)>50
43-(35)>52
43-(49)>53
43-(41)>54
43-(11)>57
43-(4)>58
43-(39)>60
43-(11)>61
44-(35)>50
44-(18)>54
44-(30)>55
44-(15)>57
44-(40)>58
44-(13)>59
44-(43)>60
45-(3)>50
45-(9)>53
45-(38)>54
45-(4)>55
45-(32)>56
45-(10)>59
45-(17)>60
46-(38)>51
46-(3)>52
46-(14)>57
46-(26)>58
47-(30)>50
47-(25)>51
47-(31)>52
47-(8)>56
47-(8)>58
47-(40)>61
48-(40)>51
48-(35)>52
48-(40)>53
48-(29)>54
48-(25)>55
48-(25)>56
48-(32)>61
49-(50)>50
49-(26)>51
49-(28)>53
49-(38)>54
49-(40)>55
49-(3)>56
49-(29)>60
49-(27)>61
50-(23)>62
50-(25)>63
50-(17)>64
50-(5)>65
50-(11)>66
50-(4)>67
50-(4)>68
50-(35)>69
51-(10)>63
51-(45)>65
51-(4)>66
51-(28)>67
51-(2)>69
51-(47)>70
52-(31)>63
52-(36)>64
52-(18)>65
52-(24)>66
52-(26)>67
52-(13)>69
53-(39)>62
53-(10)>63
53-(30)>65
53-(4)>66
53-(28)>67
53-(31)>68
53-(23)>70
54-(11)>62
54-(3)>63
54-(14)>64
54-(18)>66
54-(47)>68
54-(26)>70
55-(26)>62
55-(39)>63
55-(34)>64
55-(1)>66
56-(37)>63
56-(8)>64
56-(17)>65
56-(17)>66
56-(48)>68
56-(39)>70
57-(5)>63
57-(31)>64
57-(39)>66
57-(17)>68
57-(25)>70
58-(7)>62
58-(7)>63
58-(11)>65
58-(48)>67
58-(22)>68
58-(17)>70
59-(9)>62
59-(14)>63
59-(49)>64
59-(26)>65
59-(28)>66
59-(5)>69
59-(2)>70
60-(1)>62
60-(15)>63
60-(49)>67
60-(27)>69
60-(9)>70
61-(21)>63
61-(20)>64
61-(11)>65
61-(49)>66
61-(12)>67
61-(36)>68
61-(36)>69
61-(2)>70
62-(50)>71
62-(13)>74
62-(15)>75
62-(47)>78
62-(29)>79
62-(6)>80
63-(1)>71
63-(48)>73
63-(12)>74
63-(9)>76
63-(9)>78
63-(5)>79
64-(6)>71
64-(45)>72
64-(5)>74
64-(41)>75
64-(47)>77
64-(37)>79
65-(31)>71
65-(10)>72
65-(12)>73
65-(31)>75
65-(2)>77
65-(42)>78
65-(24)>79
65-(11)>80
66-(42)>73
66-(45)>74
66-(6)>77
66-(24)>78
66-(27)>80
67-(18)>71
67-(50)>73
67-(23)>74
67-(44)>76
67-(46)>77
67-(15)>79
67-(50)>80
68-(28)>72
68-(12)>73
68-(14)>74
68-(29)>75
68-(41)>76
68-(25)>77
68-(16)>78
68-(41)>79
68-(10)>80
69-(34)>71
69-(41)>72
69-(27)>73
69-(47)>74
69-(4)>75
69-(41)>76
69-(16)>77
69-(6)>78
69-(38)>79
69-(45)>80
70-(4)>73
70-(9)>77
70-(7)>78
71-(11)>83
71-(32)>84
71-(47)>86
71-(24)>87
71-(31)>88
71-(8)>91
72-(29)>81
72-(49)>82
72-(5)>83
72-(47)>86
72-(37)>92
73-(7)>82
73-(17)>84
73-(9)>85
73-(11)>86
73-(3)>88
73-(50)>89
73-(28)>90
73-(13)>91
73-(1)>92
74-(22)>82
74-(2)>84
74-(28)>85
74-(27)>87
74-(35)>88
74-(22)>90
75-(39)>82
75-(26)>83
75-(45)>87
75-(48)>88
75-(28)>89
75-(36)>90
75-(32)>91
76-(28)>81
76-(47)>83
76-(48)>84
76-(24)>85
76-(21)>86
76-(50)>89
76-(11)>91
77-(26)>82
77-(45)>83
77-(37)>85
77-(4)>88
77-(35)>89
77-(27)>91
77-(38)>92
78-(7)>81
78-(28)>83
78-(25)>85
78-(32)>86
78-(37)>87
78-(6)>88
78-(44)>89
78-(27)>92
79-(12)>81
79-(35)>84
79-(14)>86
79-(10)>88
79-(18)>89
79-(7)>90
79-(12)>92
80-(3)>83
80-(24)>84
80-(50)>85
80-(28)>89
80-(43)>90
80-(40)>92
81-(28)>93
82-(33)>93
83-(29)>93
84-(30)>93
85-(38)>93
86-(3)>93
87-(48)>93
88-(28)>93
89-(15)>93
90-(8)>93
91-(31)>93
92-(47)>93
"""

INPUT_EXPECTED = [
    pytest.param(INPUT_184, 184, id="INPUT_184"),
    pytest.param(INPUT_51, 51, id="INPUT_51"),
    pytest.param(INPUT_134_EDGES, 121, id="INPUT_134_EDGES"),
    pytest.param(INPUT_517_EDGES, 247, id="INPUT_517_EDGES"),
]
